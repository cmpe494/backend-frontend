<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BDD to Requirements Generator</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ¤– BDD to Requirements Generator</h1>
            <p>Convert your BDD scenarios into technical artifacts using AI</p>
        </header>

        <div class="main-content">
            <!-- Left Panel: BDD Input -->
            <div class="panel input-panel">
                <div class="panel-header">
                    <h2>ğŸ“ BDD Scenario</h2>
                    <button class="btn-secondary" onclick="clearInput()">Clear</button>
                </div>

                <!-- âœ… Feature + Scenario Selection -->
                <div class="picker-row">
                    <div class="picker-grid">
                        <div class="picker-col">
                            <label for="featureSelect">
                                ğŸ“ Select Feature
                            </label>
                            <select id="featureSelect" class="select" onchange="onFeatureChange()">
                                <option value="">Loading...</option>
                            </select>
                        </div>

                        <div class="picker-col">
                            <label for="scenarioSelect">
                                ğŸ¬ Select Scenario
                            </label>
                            <select id="scenarioSelect" class="select" onchange="onScenarioChange()" disabled>
                                <option value="">Select a feature first</option>
                            </select>
                        </div>
                    </div>

                    <div class="picker-actions">
                        <button class="btn-secondary" onclick="loadSelectedScenarioToEditor()" id="loadScenarioBtn" disabled>
                            â• Load Selected Scenario into Editor
                        </button>
                        <button class="btn-secondary" onclick="loadWholeFeatureToEditor()" id="loadFeatureBtn" disabled>
                            ğŸ“„ Load Entire Feature into Editor
                        </button>
                    </div>

                    <small id="selectedInfo">
                        No selection made.
                    </small>
                </div>
                <!-- âœ… /Feature + Scenario Selection -->

                <textarea 
                    id="bddInput" 
                    placeholder="Feature: User Registration

Scenario: Successful registration
  Given the user is on the registration page
  When valid information is entered
  Then the system registers the user"
                ></textarea>
                
                <!-- Action buttons -->
                <div class="button-group">
                    <button class="btn-primary" onclick="generateRequirements()">
                        <span class="btn-icon">âœ¨</span>
                        Generate Requirements
                    </button>
                    <button class="btn-primary btn-test" onclick="generateTestCases()">
                        <span class="btn-icon">ğŸ§ª</span>
                        Generate Test Cases
                    </button>
                    <button class="btn-primary btn-uml" onclick="showUMLDialog()">
                        <span class="btn-icon">ğŸ“Š</span>
                        Generate UML Diagram
                    </button>
                </div>
            </div>

            <!-- Right Panel: Outputs -->
            <div class="panel output-panel">
                <!-- Tabs -->
                <div class="tabs">
                    <button class="tab-btn active" onclick="switchTab('requirements')">ğŸ“‹ Requirements</button>
                    <button class="tab-btn" onclick="switchTab('testcases')">ğŸ§ª Test Cases</button>
                    <button class="tab-btn" onclick="switchTab('uml')">ğŸ“Š UML Diagram</button>
                </div>

                <!-- Requirements Tab -->
                <div id="requirements-tab" class="tab-content active">
                    <div class="panel-header">
                        <h2>ğŸ“‹ Requirements</h2>
                        <div class="action-buttons">
                            <button class="btn-secondary" onclick="copyOutput('requirements')">ğŸ“‹ Copy</button>
                            <button class="btn-secondary" onclick="downloadOutput('requirements')">ğŸ’¾ Download</button>
                        </div>
                    </div>
                    <div id="requirements-output" class="output-content">
                        <div class="placeholder">
                            <div class="placeholder-icon">ğŸ¯</div>
                            <p>Requirements will appear here...</p>
                            <p class="placeholder-hint">
                                Enter a BDD scenario on the left and click â€œGenerate Requirementsâ€
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Test Cases Tab -->
                <div id="testcases-tab" class="tab-content">
                    <div class="panel-header">
                        <h2>ğŸ§ª Test Cases</h2>
                        <div class="action-buttons">
                            <button class="btn-secondary" onclick="copyOutput('testcases')">ğŸ“‹ Copy</button>
                            <button class="btn-secondary" onclick="downloadOutput('testcases')">ğŸ’¾ Download</button>
                        </div>
                    </div>
                    <div id="testcases-output" class="output-content">
                        <div class="placeholder">
                            <div class="placeholder-icon">ğŸ§ª</div>
                            <p>Test cases will appear here...</p>
                            <p class="placeholder-hint">
                                Click â€œGenerate Test Casesâ€
                            </p>
                        </div>
                    </div>
                </div>

                <!-- UML Diagram Tab -->
                <div id="uml-tab" class="tab-content">
                    <div class="panel-header">
                        <h2>ğŸ“Š UML Diagram</h2>
                        <div class="action-buttons">
                            <button class="btn-secondary" onclick="downloadDiagram()">ğŸ’¾ Download PNG</button>
                        </div>
                    </div>
                    <div id="uml-output" class="output-content">
                        <div class="placeholder">
                            <div class="placeholder-icon">ğŸ“Š</div>
                            <p>UML diagram will appear here...</p>
                            <p class="placeholder-hint">
                                Click â€œGenerate UML Diagramâ€ and select a diagram type
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- UML Dialog Modal -->
        <div id="umlDialog" class="modal hidden">
            <div class="modal-content">
                <h2>ğŸ“Š Select UML Diagram Type</h2>
                <p>Which UML diagram would you like to generate?</p>
                <div class="diagram-options">
                    <button class="diagram-btn" onclick="generateUMLDiagram('usecase')">
                        <span class="diagram-icon">ğŸ‘¤</span>
                        <span>Use Case Diagram</span>
                    </button>
                    <button class="diagram-btn" onclick="generateUMLDiagram('sequence')">
                        <span class="diagram-icon">â­ï¸</span>
                        <span>Sequence Diagram</span>
                    </button>
                    <button class="diagram-btn" onclick="generateUMLDiagram('class')">
                        <span class="diagram-icon">ğŸ“¦</span>
                        <span>Class Diagram</span>
                    </button>
                    <button class="diagram-btn" onclick="generateUMLDiagram('activity')">
                        <span class="diagram-icon">ğŸ”„</span>
                        <span>Activity Diagram</span>
                    </button>
                    <button class="diagram-btn" onclick="generateUMLDiagram('state')">
                        <span class="diagram-icon">ğŸ”€</span>
                        <span>State Diagram</span>
                    </button>
                </div>
                <button class="btn-secondary" onclick="closeUMLDialog()">Cancel</button>
            </div>
        </div>

        <!-- Loading Overlay -->
        <div id="loadingOverlay" class="loading-overlay hidden">
            <div class="loading-spinner"></div>
            <p>AI is analyzing...</p>
        </div>

        <!-- Toast Notification -->
        <div id="toast" class="toast hidden"></div>
    </div>
    <script>
        // Load feature list on page load
        window.addEventListener("DOMContentLoaded", () => {
            if (typeof loadFeatureList === "function") {
                loadFeatureList();
            }
        });
    </script>
    <script src="script.js"></script>
</body>
</html>
